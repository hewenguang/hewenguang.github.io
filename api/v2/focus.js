(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=new(function(){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._ready=!1,this._container=null,this.create(),this.handleClickEvent=this.handleClick.bind(this),app.addAction("keyup",(function(t){27===t&&(api.send("analytics-click",{event:"keyup-focus-esc"}),e.destory(),app.doAction("message-close"))}))}var n,o,c;return n=t,(o=[{key:"create",value:function(){var e=dom.create("style",{title:"cc-stylesheet",textContent:"\n        .cc-focus{\n          background:#ddd !important;\n          cursor:pointer !important;\n          outline:3px dashed #777 !important;\n        }\n        .cc-focus-hide{\n          opacity:0 !important;\n          visibility:hidden !important;\n        }\n      "});document.head.appendChild(e)}},{key:"handleMouseover",value:function(e){var t=e.target,n=e.fromElement||e.relatedTarget;utils.isElement(n)&&n.classList.remove("cc-focus"),t.classList.add("cc-focus")}},{key:"handleClick",value:function(e){app.doAction("message-close");var t=e.target;this._container?!this._container.contains(t)&&this.destory():(e.stopPropagation(),e.preventDefault(),t.classList.remove("cc-focus"),document.removeEventListener("mouseover",this.handleMouseover),dom.parentExcept(t,(function(e){e.classList.add("cc-focus-hide")})),this._container=t)}},{key:"start",value:function(){this._ready||this._container||(this._ready=!0,app.doAction("focus-start"),app.doAction("message",api.i18n.getMessage("focus_message")),document.addEventListener("mouseover",this.handleMouseover),document.addEventListener("click",this.handleClickEvent))}},{key:"destory",value:function(){this._ready&&(this._ready=!1,document.removeEventListener("mouseover",this.handleMouseover),document.removeEventListener("click",this.handleClickEvent),document.querySelectorAll(".cc-focus, .cc-focus-hide").forEach((function(e){e.classList.remove("cc-focus","cc-focus-hide")})),this._container=null,setTimeout((function(){app.doAction("focus-destory")}),100))}}])&&e(n.prototype,o),c&&e(n,c),t}());app.addAction("load-plugin-focus",(function(){t.start()})),app.addAction("load-plugin-render",(function(){t.destory()})),t.start()})();