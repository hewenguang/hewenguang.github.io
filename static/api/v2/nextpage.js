(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var e,n=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=location.href,this.host=location.host,this.LinkREG=/下一|next/}var n,o,i;return n=e,(o=[{key:"start",value:function(t){for(var e,n=Array.prototype.slice.call(t.body.getElementsByTagName("a"));n.length;){var o=n.pop(),i=o.parentElement;if(dom.visible(o)&&o.host===this.host&&i){var a=dom.nodeText(o);if(this.LinkREG.test("".concat(this.getAttributes(o)," ").concat(a))&&o.href.split(this.url).length<2){e=o;break}if(1===i.childElementCount&&this.LinkREG.test(this.getAttributes(i))){e=o;break}}}return utils.isElement(e)?e.href:""}},{key:"getAttributes",value:function(t){var e="";return utils.each(t.attributes,(function(t){e+=" "+t.nodeValue})),e}}])&&t(n.prototype,o),i&&t(n,i),e}(),o=app._cache.render,i=app._cache.parser;window.addEventListener("scroll",(function(){o._ready&&(e&&clearTimeout(e),e=setTimeout((function(){document.documentElement.scrollTop+document.documentElement.clientHeight>=document.documentElement.scrollHeight-360&&app.doAction("scroll-bottom")}),200))})),app.addAction("show",(function(){e&&clearTimeout(e),e=setTimeout((function(){document.documentElement.clientHeight>100&&document.documentElement.scrollHeight<=document.documentElement.clientHeight&&app.doAction("scroll-bottom")}),1500)}));var a=new n;app.addAction("scroll-bottom",(function(){if(i._ready&&o._ready){var t=i.getContext(),e=a.start(t);e&&(app.doAction("message",api.i18n.getMessage("nextpage_loading"),{loading:!0,icon:'\n      <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">\n        <path d="M813.696 813.696c166.613333-166.613333 166.613333-436.778667 0-603.392-166.613333-166.613333-436.778667-166.613333-603.392 0A64 64 0 0 0 300.8 300.8a298.666667 298.666667 0 1 1 422.4 422.4 64 64 0 0 0 90.496 90.496z"></path>\n      </svg>\n    '}),i.start(e))}}))})();