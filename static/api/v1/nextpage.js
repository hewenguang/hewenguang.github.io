(()=>{"use strict";function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var e,o=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=location.href,this.host=location.host,this.LinkREG=/下一|next/}var o,n,i;return o=e,(n=[{key:"start",value:function(t){for(var e,o=Array.prototype.slice.call(t.body.getElementsByTagName("a"));o.length;){var n=o.pop(),i=n.parentElement;if(dom.visible(n)&&n.host===this.host&&i){var r=dom.nodeText(n);if(this.LinkREG.test("".concat(this.getAttributes(n)," ").concat(r))&&n.href.split(this.url).length<2){e=n;break}if(1===i.childElementCount&&this.LinkREG.test(this.getAttributes(i))){e=n;break}}}return utils.isElement(e)?e.href:""}},{key:"getAttributes",value:function(t){var e="";return utils.each(t.attributes,(function(t){e+=" "+t.nodeValue})),e}}])&&t(o.prototype,n),i&&t(o,i),e}(),n=app._cache.render,i=app._cache.parser,r=n.root;r.addEventListener("scroll",(function(){e&&clearTimeout(e),e=setTimeout((function(){r.scrollTop+r.clientHeight>=r.scrollHeight-360&&app.doAction("scroll-bottom")}),200)})),app.addAction("show",(function(){e&&clearTimeout(e),e=setTimeout((function(){r.clientHeight>100&&r.scrollHeight<=r.clientHeight&&app.doAction("scroll-bottom")}),1500)}));var a=new o;app.addAction("scroll-bottom",(function(){if(i._ready){var t=i.getContext(),e=a.start(t);e&&(app.doAction("loading",!0),i.start(e))}}))})();